# Kubernetes Secrets for Todo Application
# NOTE: This file contains placeholder values for reference only
# In production, create secrets using kubectl create secret or sealed-secrets

# IMPORTANT: DO NOT commit actual secrets to git!
# Use this as a template to create actual secrets

---
# Backend Service Secrets
apiVersion: v1
kind: Secret
metadata:
  name: backend-secrets
  namespace: todo-app
type: Opaque
stringData:
  # Database Configuration
  database-url: "postgresql://postgres:CHANGE_ME@postgres:5432/postgres"
  db-host: "postgres"
  db-port: "5432"
  db-name: "postgres"
  db-user: "postgres"
  db-password: "CHANGE_ME"

  # Gemini AI API Key
  gemini-api-key: "YOUR_GEMINI_API_KEY_HERE"

  # State Store Encryption Key (generate with: openssl rand -base64 32)
  state-encryption-key: "CHANGE_ME_GENERATE_RANDOM_32_BYTE_KEY"

---
# Frontend Service Secrets
apiVersion: v1
kind: Secret
metadata:
  name: frontend-secrets
  namespace: todo-app
type: Opaque
stringData:
  # Better Auth Configuration
  better-auth-secret: "CHANGE_ME_GENERATE_SECURE_RANDOM_STRING"
  better-auth-url: "http://todo-frontend:3000"

  # Database Configuration (for better-auth)
  database-url: "postgresql://postgres:CHANGE_ME@postgres:5432/postgres"

  # API Configuration
  next-public-api-url: "http://todo-backend:8000/"

---
# Kafka/Redpanda Cloud Credentials (for production)
apiVersion: v1
kind: Secret
metadata:
  name: kafka-secrets
  namespace: todo-app
type: Opaque
stringData:
  # Redpanda Cloud Configuration
  redpanda-bootstrap-servers: "YOUR_CLUSTER.redpanda.cloud:9092"
  redpanda-username: "YOUR_API_KEY_ID"
  redpanda-password: "YOUR_API_KEY_SECRET"
  sasl-mechanism: "SCRAM-SHA-256"

---
# Instructions for Creating Secrets in Kubernetes

# 1. Create Backend Secrets:
# kubectl create secret generic backend-secrets \
#   --from-literal=database-url='postgresql://postgres:YOUR_PASSWORD@postgres:5432/postgres' \
#   --from-literal=gemini-api-key='YOUR_GEMINI_API_KEY' \
#   --from-literal=state-encryption-key='YOUR_32_BYTE_BASE64_KEY' \
#   --namespace=todo-app

# 2. Create Frontend Secrets:
# kubectl create secret generic frontend-secrets \
#   --from-literal=better-auth-secret='YOUR_SECURE_RANDOM_STRING' \
#   --from-literal=database-url='postgresql://postgres:YOUR_PASSWORD@postgres:5432/postgres' \
#   --from-literal=next-public-api-url='http://todo-backend:8000/' \
#   --namespace=todo-app

# 3. Create Kafka Secrets (for Redpanda Cloud):
# kubectl create secret generic kafka-secrets \
#   --from-literal=redpanda-bootstrap-servers='YOUR_CLUSTER.redpanda.cloud:9092' \
#   --from-literal=redpanda-username='YOUR_API_KEY_ID' \
#   --from-literal=redpanda-password='YOUR_API_KEY_SECRET' \
#   --namespace=todo-app

# 4. Verify Secrets:
# kubectl get secrets -n todo-app
# kubectl describe secret backend-secrets -n todo-app

# 5. Generate Secure Random Values:
# For AUTH_SECRET: openssl rand -base64 32
# For ENCRYPTION_KEY: openssl rand -base64 32
